{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "AAAA,EAAE,CAAC,KAAK,CAAC;AACL,eAAS,EAAE,CAAC,SAAS;;AAErB,cAAU,EAAE;;;;;;;;;;;AAWR,iBAAS,EAAE,CAAC;KACf;;AAED,cAAU,EAAE,sBAAW;AACnB,eAAO,IAAI,CAAC,YAAY,CAAA;KAC3B;;AAED,eAAW,EAAE,uBAAW;AACpB,YAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KAC5B;;;AAGD,UAAM,EAAE,kBAAY;AAChB,YAAI,CAAC,YAAY,GAAG,KAAK,CAAC;AAC1B,YAAI,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;AAChE,YAAI,CAAC,KAAK,GAAG,KAAK,CAAC;;AAEnB,YAAG,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;AACpB,gBAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;AAC3C,gBAAI,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;SAE5C,MACI;AACD,gBAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;SAC5D;AACD,YAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACd,YAAI,CAAC,CAAC,GAAG,GAAG,CAAC;;;AAGb,YAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;AAC9B,YAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAA,UAAS,KAAK,EAAC;AACvD,iBAAK,CAAC,eAAe,EAAE,CAAC;AACxB,gBAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;AAC/B,gBAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACtB,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACd,YAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE,CAAA,UAAS,KAAK,EAAC;AACtD,gBAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;SAC9B,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;AAEd,YAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,CAAA,UAAS,KAAK,EAAC;AACrD,gBAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;AAC5B,gBAAG,IAAI,CAAC,gBAAgB,EAAE;AACtB,uBAAO;aACV;AACD,gBAAI,KAAK,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;AAChC,gBAAI,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;AAC3E,gBAAG,IAAI,CAAC,YAAY,KAAK,KAAK,EAAE;;AAC5B,oBAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;AAC7B,uBAAO;aACV;;;;;;;;AAQD,gBAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AAC3B,gBAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AAC3B,gBAAI,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;AACtB,gBAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SAEtB,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACd,YAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,CAAA,UAAS,KAAK,EAAE;AACzD,gBAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;AAC5B,gBAAG,IAAI,CAAC,gBAAgB,EAAE;AACtB,uBAAO;aACV;;AAED,gBAAI,KAAK,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;AAChC,gBAAI,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;AAC3E,gBAAG,IAAI,CAAC,YAAY,KAAK,KAAK,EAAE;;AAC5B,oBAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;AAC7B,uBAAO;aACV;;AAED,gBAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AAC3B,gBAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC;AAC3B,gBAAI,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;AACtB,gBAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACtB,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;KAEjB;;AAED,iBAAa,EAAE,uBAAS,IAAI,EAAE,IAAI,EAAE;AAChC,YAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,YAAI,CAAC,OAAO,GAAG,IAAI,CAAC;KACvB;;AAED,kBAAc,EAAE,wBAAS,KAAK,EAAE;AAC5B,YAAG,IAAI,CAAC,gBAAgB,KAAK,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;;AAC7C,mBAAO;SACV;;AAED,YAAI,KAAK,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;AAChC,YAAI,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;;AAExB,YAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;AACrD,YAAI,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACpB,YAAI,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;;;;;;;;;KASvB;;AAED,iBAAa,EAAE,yBAAW;AACtB,YAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;KAChC;;AAED,SAAK,EAAE,iBAAW;AACd,YAAI,CAAC,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC;AACzC,YAAI,CAAC,gBAAgB,EAAE,CAAC;;;KAG3B;;AAED,qBAAiB,EAAE,6BAAW;AAC1B,YAAG,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;AACpB,gBAAI,CAAC,GAAG,CAAC,MAAM,GAAG,KAAK,CAAC;AACxB,gBAAI,CAAC,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC;AACtB,mBAAO;SACV,MACI;;AAED,gBAAI,CAAC,kBAAkB,EAAE,CAAC;SAC7B;KACJ;;AAED,oBAAgB,EAAE,4BAAW;AACzB,YAAG,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;AACpB,gBAAI,CAAC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC;AACvB,gBAAI,CAAC,EAAE,CAAC,MAAM,GAAG,KAAK,CAAC;AACvB,mBAAO;SACV,MACI;AACD,gBAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;SAC9B;KACJ;;AAED,0BAAsB,EAAE,kCAAW;AAC/B,YAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACd,YAAI,CAAC,IAAI,GAAG,CAAC,CAAC;KACjB;;AAED,sBAAkB,EAAE,8BAAW;AAC3B,YAAI,CAAC,IAAI,GAAG,CAAC,CAAC;KACjB;;;AAGD,UAAM,EAAE,gBAAU,EAAE,EAAE;AAClB,YAAG,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;AACpB,mBAAO;SACV;;AAED,YAAG,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;AAChB,mBAAO;SACV;;AAED,YAAG,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;;AACnC,gBAAI,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC;AACpB,gBAAI,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,CAAC;AAC5B,gBAAG,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,EAAE,EAAE;;AAC7B,oBAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACd,oBAAI,CAAC,UAAU,CAAC,MAAM,GAAG,EAAE,CAAC;aAC/B;SACJ,MACI,IAAG,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;;AACxC,gBAAI,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC;AACpB,gBAAI,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,CAAC;AAC5B,gBAAG,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,EAAE;;AAC5B,oBAAI,CAAC,IAAI,GAAG,CAAC,CAAC;aACjB;SACJ,MACI,IAAG,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;;AACrB,gBAAI,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC;AACpB,gBAAI,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,CAAC;AAC5B,gBAAG,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,EAAE,EAAE;;AAC7B,oBAAI,CAAC,IAAI,GAAG,CAAC,CAAC;AACd,oBAAI,CAAC,UAAU,CAAC,MAAM,GAAG,EAAE,CAAC;aAC/B;SACJ;KACJ;CACJ,CAAC,CAAC",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        \r\n        elec_type: 1,\r\n    },\r\n    \r\n    is_ui_drag: function() {\r\n        return this.is_drag_item\r\n    },\r\n    \r\n    set_ui_drag: function() {\r\n        this.is_drag_item = true;\r\n    },\r\n    \r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.is_drag_item = false;\r\n        this.game_scene = cc.find(\"UI_ROOT\").getComponent(\"game_scene\");\r\n        this.hited = false;\r\n        \r\n        if(this.elec_type <= 9) {\r\n            this.off = this.node.getChildByName(\"off\");\r\n            this.on = this.node.getChildByName(\"on\");    \r\n            \r\n        }\r\n        else {\r\n            this.elec_value = this.node.getChildByName(\"elec_value\");\r\n        }\r\n        this.mode = 0;\r\n        this.v = 100;\r\n        \r\n        // touch\r\n        this.is_invalid_touch = false;\r\n        this.node.on(cc.Node.EventType.TOUCH_START, function(event){\r\n            event.stopPropagation();\r\n            this.node.setLocalZOrder(1000);\r\n            this.hited = false;\r\n        }.bind(this));\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function(event){\r\n            this.on_touch_moved(event);\r\n        }.bind(this));\r\n        \r\n        this.node.on(cc.Node.EventType.TOUCH_END, function(event){\r\n            this.node.setLocalZOrder(0);\r\n            if(this.is_invalid_touch) {\r\n                return;\r\n            }\r\n            var w_pos = event.getLocation();\r\n            var is_hit = this.game_scene.on_hit_test(this.node, this.elec_type, w_pos);\r\n            if(this.is_drag_item === false) { // 删除\r\n                this.node.removeFromParent();\r\n                return;\r\n            }\r\n            /*if(is_hited) {\r\n                this.node.opacity = 0;\r\n                this.hited = true;\r\n                this.node.x = this.start_x;\r\n                this.node.y = this.start_y;\r\n            }*/\r\n            \r\n            this.node.x = this.start_x;\r\n            this.node.y = this.start_y;\r\n            this.node.opacity = 0;\r\n            this.hited = false;\r\n            \r\n        }.bind(this));\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, function(event) {\r\n            this.node.setLocalZOrder(0);\r\n            if(this.is_invalid_touch) {\r\n                return;\r\n            }\r\n            \r\n            var w_pos = event.getLocation();\r\n            var is_hit = this.game_scene.on_hit_test(this.node, this.elec_type, w_pos);\r\n            if(this.is_drag_item === false) { // 删除\r\n                this.node.removeFromParent();\r\n                return;\r\n            }\r\n            \r\n            this.node.x = this.start_x;\r\n            this.node.y = this.start_y;\r\n            this.node.opacity = 0;\r\n            this.hited = false;\r\n        }.bind(this));\r\n        // end \r\n    },\r\n    \r\n    set_start_pos: function(xpos, ypos) {\r\n        this.start_x = xpos;\r\n        this.start_y = ypos;\r\n    }, \r\n    \r\n    on_touch_moved: function(event) {\r\n        if(this.is_invalid_touch === true || this.hited) { // 屏蔽掉这个消息。\r\n            return;\r\n        }\r\n        \r\n        var w_pos = event.getLocation();\r\n        this.node.opacity = 128;\r\n        \r\n        var pos = this.node.parent.convertToNodeSpace(w_pos);\r\n        this.node.x = pos.x;\r\n        this.node.y = pos.y;\r\n        /*\r\n        var is_hited = this.game_scene.on_hit_test(this.node, this.elec_type, w_pos);\r\n        if(is_hited) {\r\n            this.node.opacity = 0;\r\n            this.hited = true;\r\n            this.node.x = this.start_x;\r\n            this.node.y = this.start_y;\r\n        }*/\r\n    },\r\n    \r\n    invalid_touch: function() {\r\n        this.is_invalid_touch = true;\r\n    }, \r\n    \r\n    start: function() {\r\n        this.node.setCascadeOpacityEnabled(true);\r\n        this.show_when_failed();\r\n        // this.show_when_success();\r\n        // this.show_anim_not_conneced();\r\n    },\r\n    \r\n    show_when_success: function() {\r\n        if(this.elec_type <= 9) {\r\n            this.off.active = false;\r\n            this.on.active = true;\r\n            return;\r\n        }\r\n        else {\r\n            // this.elec_value.height = 69;\r\n            this.show_anim_conneced();\r\n        }\r\n    },\r\n    \r\n    show_when_failed: function() {\r\n        if(this.elec_type <= 9) {\r\n            this.off.active = true;\r\n            this.on.active = false;\r\n            return;\r\n        }\r\n        else {\r\n            this.elec_value.height = 0;\r\n        }\r\n    },\r\n    \r\n    show_anim_not_conneced: function() {\r\n        this.mode = 2;\r\n        this.step = 0;\r\n    },\r\n    \r\n    show_anim_conneced: function() {\r\n        this.mode = 1;\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this.elec_type <= 9) {\r\n            return;\r\n        }\r\n        \r\n        if(this.mode === 0) {\r\n            return;\r\n        }\r\n        \r\n        if(this.mode === 2 && this.step === 0) { // 涨\r\n            var s = this.v * dt;\r\n            this.elec_value.height += s;\r\n            if(this.elec_value.height >= 69) { // 涨停\r\n                this.step = 1;\r\n                this.elec_value.height = 69;\r\n            }\r\n        }\r\n        else if(this.mode === 2 && this.step === 1) { // 跌停\r\n            var s = this.v * dt;\r\n            this.elec_value.height -= s;\r\n            if(this.elec_value.height <= 0) { // 跌停\r\n                this.mode = 0;\r\n            }\r\n        }\r\n        else if(this.mode === 1) { // 成功涨到最高。\r\n            var s = this.v * dt;\r\n            this.elec_value.height += s;\r\n            if(this.elec_value.height >= 69) { // 涨停\r\n                this.mode = 0;\r\n                this.elec_value.height = 69;\r\n            }\r\n        }\r\n    },\r\n});\r\n"
  ]
}